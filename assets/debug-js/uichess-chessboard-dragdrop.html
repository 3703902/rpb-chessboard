<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Sandbox for uichess-chessboard.js (drag &amp; drop)</title>

	<!-- Third-party required components -->
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
	<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css" />

	<!-- Other required components -->
	<script type="text/javascript" src="../../js/rpbchess.js"></script>

	<!-- Tested component -->
	<script type="text/javascript" src="../../js/uichess-chessboard.js"></script>
	<link rel="stylesheet" type="text/css" href="../../css/uichess-chessboard.css" />

</head>

<body>
	<h1>Sandbox for uichess-chessboard.js (drag &amp; drop)</h1>

	<div style="display: flex;">
		<div style="width: 40%;">
			<form>
				<p>
					<input id="make-empty"  type="button" value="Empty position"  /><br/>
					<input id="make-start"  type="button" value="Start position"  /><br/>
					<input id="make-custom" type="button" value="Custom position" />
				</p>
				<p>
					<input id="flip" type="checkbox" />
					<label for="flip">Flip</label>
					<input id="annotations" type="checkbox" />
					<label for="annotations">Annotations</label>
					<input id="print-fen" type="button" value="Print FEN" />
				</p>
				<p>
					Interaction mode:
					<span id="mode">
						<input id="mode-none"       type="radio" name="mode" value="none"       /><label for="mode-none"      >None</label>
						<input id="mode-movePieces" type="radio" name="mode" value="movePieces" /><label for="mode-movePieces">Move pieces</label>
						<input id="mode-play"       type="radio" name="mode" value="play"       /><label for="mode-play"      >Play</label>
					</span>
				</p>
				<p>
					<input id="change-turn" type="button" value="Change turn" />
				</p>
			</form>
			<pre id="info"></pre>
		</div>
		<div style="width: 60%; background: #e0ffe0;">
			<div id="a"></div>
		</div>
	</div>

	<hr/>

	<div style="display: flex;">
		<div style="width: 33%;">
			<div id="b1"></div>
		</div>
		<div style="width: 33%;">
			<div id="b2"></div>
		</div>
		<div style="width: 33%;">
			<div id="b3"></div>
		</div>
	</div>

	<script type="text/javascript">

		$('#a').chessboard({
			position: 'start',
			squareSize: 48,
			interactionMode: 'movePieces',

			move: function(event, ui) {
				$('#info').append('<div>Move from ' + ui.from + ' to ' + ui.to + '</div>')
			},

			add: function(event, ui) {
				$('#info').append('<div>Add ' + ui.piece.type + ui.piece.color + ' in ' + ui.square + '</div>')
			},

			change: function(event, ui) {
				$('#info').append('<div>' + $('#a').chessboard('option', 'position') + '</div>');
			}

		});

		$('#annotations').prop('checked', false);
		$('#annotations').button().click(function() {
			if($('#annotations').prop('checked')) {
				$('#a').chessboard('addArrowMarker', 'Ga1h8');
			}
			else {
				$('#a').chessboard('option', 'squareMarkers', '');
				$('#a').chessboard('option', 'arrowMarkers', '');
			}
		});

		$('#b1').chessboard({
			position: 'empty',
			squareSize: 28,
			interactionMode: 'movePieces'
		});

		$('#b2').chessboard({
			position: 'start',
			squareSize: 28,
			interactionMode: 'movePieces'
		});

		$('#b3').chessboard({
			position: 'r3k3/1bn3nP/1P6/2n3n1/R4pP1/8/Q2P3R/8 w kq - 0 1',
			squareSize: 20,
			interactionMode: 'movePieces'
		});

		$('#make-empty' ).button().click(function() { $('#a').chessboard('option', 'position', 'empty'); });
		$('#make-start' ).button().click(function() { $('#a').chessboard('option', 'position', 'start'); });
		$('#make-custom').button().click(function() {
			$('#a').chessboard('option', 'position', 'r3k3/1bn3nP/1P6/2n3n1/R4pP1/8/Q2P3R/8 w kq - 0 1');
		});

		$('#flip').prop('checked', $('#a').chessboard('option', 'flip')).button().click(function() {
			$('#a').chessboard('option', 'flip', $('#flip').prop('checked'));
		});

		$('#print-fen').button().click(function() {
			$('#info').append('<div>' + $('#a').chessboard('option', 'position') + '</div>');
		});

		$('#mode-' + $('#a').chessboard('option', 'interactionMode')).prop('checked', true);
		$('#mode input').each(function(index, e) {
			$(e).click(function() {
				$('#a').chessboard('option', 'interactionMode', $(e).val());
			});
		});

		$('#change-turn').button().click(function() {
			switch($('#a').chessboard('turn')) {
				case 'w': $('#a').chessboard('turn', 'b'); return;
				case 'b': $('#a').chessboard('turn', 'w'); return;
				default:
					alert('Unknown turn: ' + $('#a').chessboard('turn'));
					break;
			}
		});

	</script>

</body>

</html>
